# HTTP 协议

HTTP 协议是建立在 TCP 协议之上的传输协议。

当浏览器与服务器建立了 TCP 连接之后，HTTP 协议规定了浏览器如何发送请求，服务器如果发送应答。

## HTTP 协议的特点

HTTP 协议基于请求/相应模型工作。浏览器向服务器发送一个请求，然后服务器返回一个响应。

HTTP 协议的主要特点包括：

- **无状态性**：每个请求都是独立的，服务器不会记住之前的交互。
- **可扩展性**：HTTP 允许传输任何类型的数据，只要在头部指明传输数据的类型即可。
- **灵活性**：HTTP 允许各种类型的请求方法，包括 `GET`、`POST`、`PUT`、`DELETE` 等。
- **安全性**：虽然 HTTP 本身不提供加密机制，但是可以通过 HTTPS 协议来进行安全的传输。

## HTTP 协议的运作

在完整的一次 HTTP 请求中，包含浏览器发出的请求 (request) 和服务器返回的响应 (response)。

请求和响应的结构类似，包含：

- **起始行**：浏览器的请求中，此行包含请求方法、请求的资源路径等信息。在服务器的响应中，此行包含状态码、状态消息等信息。
- **头部**：一系列键值对，描述了请求或响应的各种属性，例如 `Content-Type` 描述了数据类型。
- **空行**：在头部之后有一个空行，表示头部的结束和消息体的开始。
- **消息体**：可以为空，表示发送的数据，比如请求包含的表单数据，或者响应包含的网页代码等。

第一个典型的 HTTP 请求示例为：

```http request
GET / HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate, br
Connection: keep-alive

```

而一个典型的 HTTP 响应示例为：

```http request
HTTP/1.1 200 OK
Date: Tue, 18 Mar 2024 12:00:00 GMT
Server: Apache/2.4.18 (Ubuntu)
Last-Modified: Sat, 20 Apr 2023 07:18:05 GMT
ETag: "b80-58f7221737c40"
Accept-Ranges: bytes
Content-Length: 2944
Vary: Accept-Encoding
Content-Type: text/html

<!DOCTYPE html>
<html>
<head>
    <title>Welcome to Example.com!</title>
</head>
<body>
    <h1>Hello, World!</h1>
    <p>This is a sample response from www.example.com.</p>
</body>
</html>
```

### 方法

常用的方法为 `GET` 和 `POST`。

`GET` 方法主要用于请求资源。浏览器访问页面使用 `GET` 方法。

`POST` 方法主要用于提交数据，通常导致状态变化。例如注册、登录等行为。

### 请求路径

请求路径指明了客户端想要访问的页面。例如 `/page/test.html`。

这和本地的文件路径很像，但是理论上服务器可以任意理解这个路径，而不需要按照实际的文件路径来返回响应。

也就是说，请求路径只是服务器对外形式上的路径，并不代表服务器内部的运行逻辑。

### 状态码

状态码包含在响应的起始行，用于表示服务器对请求的处理结果。

状态码是一个三位数，按照第一位数字分为以下几类：

- `1xx`：信息响应，表示请求已被接受，继续处理。
- `2xx`：成功，表示请求已被服务器接收、理解和接受。
- `3xx`：重定向，要求请求另一路径的资源。
- `4xx`：客户端错误，请求包含语法错误或者无法完成请求。
- `5xx`：服务器错误，服务器在处理请求的过程中发生了错误。

常见的状态码有：

- `200`：请求成功。
- `404`：请求的资源不存在。
- `500`：服务器发生内部错误。

访问 https://learn2code.topfyf.cn/nothingishere ，你会得到 404 错误。

## HTTP 服务

HTTP 服务是指能够处理满足 HTTP 协议的请求的服务。

HTTP 协议默认使用 80 端口，所以 HTTP 服务通常需要监听 80 端口。

可以使用已有的 HTTP 服务应用，也可以自己编写程序。常用的 HTTP 服务应用有 Nginx、Apache2 等。
